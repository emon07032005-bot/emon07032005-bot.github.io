<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bubble Shooter Genies</title>
  <meta name="description" content="Bubble Shooter Genies - a mystical bubble shooter adventure with level progression and star ratings." />
  <meta name="theme-color" content="#020617" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700;900&family=Quicksand:wght@400;500;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="background-layer" aria-hidden="true"></div>
  <div class="magic-overlay" aria-hidden="true"></div>

  <main class="app" id="app">
    <section class="screen screen--active" id="home-screen" aria-labelledby="home-title">
      <div class="screen-content">
        <div class="logo-badge">Genie's Realm</div>
        <h1 class="title" id="home-title">Bubble Shooter</h1>
        <h2 class="subtitle">Genies</h2>
        <p class="tagline">
          Match enchanted bubbles, unlock ancient levels, and earn stars under a starry Arabian night.
        </p>
        <button class="btn btn-primary" data-testid="play-button" id="play-button">
          <span class="btn-icon">‚ñ∂</span>
          Play Now
        </button>
        <div class="home-hints">
          <div>
            <span class="hint-label">Touch & Drag</span>
            <span class="hint-text">Aim your shot with your finger.</span>
          </div>
          <div>
            <span class="hint-label">Match 3+</span>
            <span class="hint-text">Pop bubbles for points and stars.</span>
          </div>
        </div>
      </div>
    </section>

    <section class="screen" id="level-screen" aria-labelledby="level-title">
      <header class="top-bar">
        <button class="icon-button" data-testid="levels-back" id="levels-back" aria-label="Back to home">
          ‚Üê
        </button>
        <div>
          <h2 class="section-title" id="level-title">Select Level</h2>
          <p class="section-subtitle">Unlock levels by earning stars.</p>
        </div>
        <div class="top-bar-spacer"></div>
      </header>
      <div class="levels-grid" id="levels-grid"></div>
    </section>

    <section class="screen" id="game-screen" aria-labelledby="game-title">
      <header class="top-bar">
        <button class="icon-button" data-testid="game-back" id="game-back" aria-label="Back to levels">
          ‚Üê
        </button>
        <div class="scoreboard">
          <div>
            <p class="score-label">Level</p>
            <h3 class="score-value" id="level-name">Desert Dawn</h3>
          </div>
          <div class="divider"></div>
          <div>
            <p class="score-label">Score</p>
            <h3 class="score-value score-value--accent" id="score-display">0</h3>
          </div>
          <div class="divider"></div>
          <div>
            <p class="score-label">Stars</p>
            <div class="stars" id="star-display"></div>
          </div>
        </div>
        <button class="icon-button" data-testid="sound-toggle" id="sound-toggle" aria-label="Toggle sound">
          üîä
        </button>
      </header>

      <div class="game-area">
        <div class="game-card">
          <canvas id="game-canvas" data-testid="game-canvas"></canvas>
          <div class="next-bubble-card">
            <p>Next</p>
            <div class="next-bubble" id="next-bubble"></div>
          </div>
        </div>
        <div class="controls-hint">
          Drag to aim ‚Ä¢ Release to shoot
        </div>
      </div>
    </section>
  </main>

  <div class="modal" id="level-complete-modal" aria-hidden="true">
    <div class="modal-card">
      <h2 class="modal-title">Victory!</h2>
      <p class="modal-subtitle" id="complete-subtitle">Level complete</p>
      <div class="modal-stars" id="complete-stars"></div>
      <div class="modal-score">
        <span>Final Score</span>
        <strong id="complete-score">0</strong>
      </div>
      <div class="modal-actions">
        <button class="btn btn-primary" data-testid="next-level" id="next-level">Next Level</button>
        <div class="modal-actions-row">
          <button class="btn btn-secondary" data-testid="retry-level" id="retry-level">Retry</button>
          <button class="btn btn-secondary" data-testid="levels-button" id="levels-button">Levels</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal" id="game-over-modal" aria-hidden="true">
    <div class="modal-card modal-card--danger">
      <h2 class="modal-title">Game Over</h2>
      <p class="modal-subtitle">The bubble wall reached the bottom.</p>
      <div class="modal-score">
        <span>Your Score</span>
        <strong id="gameover-score">0</strong>
      </div>
      <div class="modal-actions-row">
        <button class="btn btn-primary" data-testid="gameover-retry" id="gameover-retry">Try Again</button>
        <button class="btn btn-secondary" data-testid="gameover-levels" id="gameover-levels">Levels</button>
      </div>
    </div>
  </div>

  <script src="game.js"></script>
</body>
</html>
